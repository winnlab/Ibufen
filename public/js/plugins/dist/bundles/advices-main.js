/*controller*/
define("controller",["can/","can/route/","can/view/","can/map/define/"],function(e,t,s,n){"use strict";e&&e.__esModule||(e={"default":e}),t&&t.__esModule||(t={"default":t}),s&&s.__esModule||(s={"default":s}),n&&n.__esModule||(n={"default":n});var i=can.Control.extend({defaults:{css_path:"css/user/"}},{init:function(){this.bindings();var e=$("#modules").find(".module.server");return this.server=e.length,this.server?(e.children().appendTo(this.element),e.remove(),this.after_request()):void System["import"](this.options.css_path+this.options.name+"/index.css!").then(can.proxy(this.request,this))},bindings:function(){},request:function(){var e,t,s,n,i=this.options.path.server,r=["name","entity_id","param2"],o=this;for(n=r.length;n--;)t=r[n],s=new RegExp(":"+t,"g"),i=i.replace(s,this.options[t]?this.options[t]:"");i=i.replace(/\/+(?=\/)/g,""),e=i.length-1,"/"==i[e]&&(i=i.substr(0,e)),can.ajax({url:"/"+i+"?ajax=true",success:function(e){o.successRequest(e)},error:function(e,t,s){console.error(s)}})},successRequest:function(e){if(e.err)return console.error(err);var t=jadeTemplate.get("user/"+this.options.name+"/content",e.data);this.element.html(t),this.after_request(e.data)},after_request:function(e){this.variables(),this.plugins(),this.sizes(),this.after_init(e),this.server&&$(window).trigger("custom_ready")},after_init:function(){},variables:function(){},plugins:function(){},sizes:function(){},"{window} resize":"resize",resize:function(){return this.element.hasClass("active")?void this.sizes():!1}});return{get default(){return i},__esModule:!0}});
